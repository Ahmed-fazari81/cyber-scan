<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Ø§Ù„Ø¯Ø±Ø¹ Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ | CyberShield</title>
<link rel="manifest" href="manifest.json">
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
<script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>

<style>
:root {
    --primary: #3b82f6;
    --dark-bg: #0f172a;
    --card-bg: #1e293b;
    --text: #f1f5f9;
}

body {
    font-family: 'Tajawal', sans-serif;
    background: var(--dark-bg);
    color: var(--text);
    margin: 0;
    padding-bottom: 50px;
    line-height: 1.6;
}

/* Header Responsive */
header {
    background: rgba(30, 41, 59, 0.95);
    padding: 15px 20px;
    position: sticky; top: 0; z-index: 100;
    border-bottom: 1px solid #334155;
    display: flex; justify-content: space-between; align-items: center;
    backdrop-filter: blur(10px);
}
.logo { font-size: 1.2rem; font-weight: 800; color: var(--primary); }
.header-btn { background: none; border: none; font-size: 1.4rem; cursor: pointer; color: #fff; }

/* Buttons Area */
.nav-buttons {
    display: flex; gap: 10px; margin-top: 20px;
    flex-wrap: wrap; /* Ù„Ù„Ø¬ÙˆØ§Ù„ */
}
.info-btn {
    flex: 1; padding: 10px; border-radius: 8px; border: 1px solid #334155;
    background: #1e293b; color: #94a3b8; font-family: inherit; cursor: pointer;
    font-size: 0.9rem; transition: 0.3s;
}
.info-btn:hover { background: #334155; color: white; }

/* Main Container */
.container {
    max-width: 600px; margin: 0 auto; padding: 20px;
}

/* Tabs */
.tabs { display: flex; gap: 8px; margin: 20px 0; background: #020617; padding: 5px; border-radius: 12px; }
.tab { flex: 1; padding: 10px; background: none; border: none; color: #64748b; border-radius: 8px; cursor: pointer; font-weight: bold; font-family: inherit; }
.tab.active { background: var(--card-bg); color: white; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }

/* Inputs */
.input-area { background: var(--card-bg); padding: 20px; border-radius: 16px; border: 1px solid #334155; }
textarea { width: 100%; height: 100px; background: #0f172a; border: 1px solid #334155; color: white; border-radius: 10px; padding: 10px; font-family: inherit; resize: none; box-sizing: border-box; }
.action-btn { width: 100%; padding: 15px; background: var(--primary); border: none; border-radius: 10px; color: white; font-weight: bold; margin-top: 15px; cursor: pointer; font-size: 1rem; }

/* Result Card */
.result-card {
    background: var(--card-bg); border-radius: 16px; padding: 25px; margin-top: 25px;
    display: none; animation: slideUp 0.4s ease; border: 1px solid #334155;
}
.meta-tag { display: inline-block; padding: 4px 12px; border-radius: 20px; background: #334155; font-size: 0.8rem; margin-bottom: 10px; color: #cbd5e1; }
.source-badge { background: #0f172a; border: 1px solid var(--primary); color: var(--primary); }

/* Modals */
.modal { position: fixed; top:0; left:0; w-100%; h-100%; width:100%; height:100%; background: rgba(0,0,0,0.85); display: none; align-items: center; justify-content: center; z-index: 200; padding: 20px; box-sizing: border-box; }
.modal-content { background: var(--card-bg); padding: 25px; border-radius: 16px; max-width: 500px; width: 100%; max-height: 80vh; overflow-y: auto; text-align: right; }
.modal h2 { margin-top: 0; color: var(--primary); border-bottom: 1px solid #334155; padding-bottom: 10px; }
.modal ul { padding-right: 20px; line-height: 1.8; color: #cbd5e1; }
.close-modal { background: #ef4444; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; width: 100%; margin-top: 20px; font-weight: bold; }

@keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

footer { text-align: center; margin-top: 40px; color: #64748b; font-size: 0.9rem; padding-bottom: 20px; }
</style>
</head>
<body>

<header>
    <div class="logo">ğŸ›¡ï¸ CyberShield</div>
    <div class="header-btn" onclick="openModal('settingsModal')">âš™ï¸</div>
</header>

<div class="container">
    
    <!-- Info Buttons -->
    <div class="nav-buttons">
        <button class="info-btn" onclick="openModal('aboutModal')">â„¹ï¸ Ø¹Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</button>
        <button class="info-btn" onclick="openModal('guideModal')">ğŸ“˜ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</button>
    </div>

    <!-- Input Section -->
    <div id="mainSection">
        <div class="tabs">
            <button class="tab active" onclick="setMode('text', this)">ğŸ”— Ø±Ø§Ø¨Ø· / Ù†Øµ</button>
            <button class="tab" onclick="setMode('image', this)">ğŸ–¼ï¸ ØµÙˆØ±Ø©</button>
            <button class="tab" onclick="setMode('qr', this)">ğŸ“· QR Code</button>
        </div>

        <div class="input-area">
            <!-- Text Input -->
            <div id="text-view">
                <textarea id="textInput" placeholder="Ø§Ù„ØµÙ‚ Ø§Ù„Ø±Ø§Ø¨Ø· Ø£Ùˆ Ø§Ù„Ù†Øµ Ù‡Ù†Ø§..."></textarea>
            </div>
            
            <!-- Image Input -->
            <div id="image-view" style="display:none; text-align:center;">
                <input type="file" id="fileInput" hidden accept="image/*" onchange="handleImage(this)">
                <div onclick="document.getElementById('fileInput').click()" style="border: 2px dashed #475569; padding: 30px; border-radius: 10px; cursor: pointer;">
                    <span style="font-size:2rem">ğŸ“‚</span><br>Ø§Ø¶ØºØ· Ù„Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø©
                </div>
                <img id="imgPreview" style="max-width:100%; margin-top:10px; border-radius:10px; display:none;">
            </div>

            <!-- QR Input -->
            <div id="qr-view" style="display:none;">
                <div id="qr-reader"></div>
                <p id="qr-result" style="text-align:center; color: var(--primary)"></p>
                <button class="info-btn" onclick="initQR()">ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</button>
            </div>

            <button id="analyzeBtn" class="action-btn" onclick="analyze()">Ø¨Ø¯Ø¡ Ø§Ù„ÙØ­Øµ Ø§Ù„Ø£Ù…Ù†ÙŠ</button>
            <button onclick="downloadReport()">ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£Ù…Ù†ÙŠ</button>
            <div id="loader" style="display:none; text-align:center; margin-top:10px;">Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ... â³</div>
        </div>
    </div>

    <!-- Result Section -->
    <div id="resultSection" class="result-card">
        <div style="text-align: center;">
            <div id="riskScore" style="font-size: 2.5rem; font-weight: bold; color: #10b981;">0</div>
            <div style="font-size: 0.9rem; color: #94a3b8;">Ø¯Ø±Ø¬Ø© Ø§Ù„Ø®Ø·ÙˆØ±Ø©</div>
        </div>
        
        <hr style="border-color: #334155; margin: 15px 0;">

        <!-- New: Source & Type Badges -->
        <div>
            <span id="resSource" class="meta-tag source-badge">Ø§Ù„Ù…ØµØ¯Ø±: ØºÙŠØ± Ù…Ø­Ø¯Ø¯</span>
            <span id="resType" class="meta-tag">Ø§Ù„Ù†ÙˆØ¹: Ù†Øµ</span>
        </div>

        <h3 id="resStatus" style="margin: 10px 0;"></h3>
        <p id="resSummary" style="color: #e2e8f0; font-size: 1rem; line-height: 1.7;"></p>

        <div style="background: #0f172a; padding: 15px; border-radius: 10px; margin-top: 15px;">
            <strong style="color: var(--primary)">ğŸ” Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠØ©:</strong>
            <p id="resDetails" style="font-size: 0.9rem; color: #94a3b8; margin-top: 5px;"></p>
        </div>

        <button class="action-btn" style="background: #475569; margin-top: 20px;" onclick="resetApp()">ğŸ”„ ÙØ­Øµ Ø¹Ù…Ù„ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</button>
    </div>

</div>

<footer>
    ØªØµÙ…ÙŠÙ…: Ø£Ø­Ù…Ø¯ Ø§Ù„ÙØ²Ø§Ø±ÙŠ 2026 Â©
</footer>

<!-- Modals -->

<!-- About Modal -->
<div id="aboutModal" class="modal">
    <div class="modal-content">
        <h2>Ø¹Ù† ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¯Ø±Ø¹ Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ</h2>
        <p>Ù…Ù†ØµØ© ØªØ­Ù„ÙŠÙ„ Ø£Ù…Ù†ÙŠ Ù…ØªÙ‚Ø¯Ù…Ø© ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ù‡Ø¬ÙŠÙ† (Hybrid AI) Ù„Ù„ÙƒØ´Ù Ø¹Ù† Ø§Ù„ØªÙ‡Ø¯ÙŠØ¯Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ©.</p>
        <p><strong>Ù„Ù…Ø§Ø°Ø§ Ù‡Ø°Ø§ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ØŸ</strong></p>
        <ul>
            <li>ÙƒØ´Ù Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„ÙŠØ© (Phishing).</li>
            <li>ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ± Ù„Ù„ÙƒØ´Ù Ø¹Ù† Ø§Ù„ØªØ²ÙŠÙŠÙ Ø§Ù„Ø¹Ù…ÙŠÙ‚ (Deepfake).</li>
            <li>Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ù…ØµØ¯Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ (ÙˆÙŠÙƒÙŠØ¨ÙŠØ¯ÙŠØ§ØŒ ÙˆØ§ØªØ³Ø§Ø¨ØŒ Ø¥Ù„Ø®).</li>
            <li>ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© (Ù…ÙˆØ¨Ø§ÙŠÙ„ØŒ ØªØ§Ø¨Ù„ØªØŒ Ø­Ø§Ø³ÙˆØ¨).</li>
        </ul>
        <p style="font-size:0.8rem; color:#64748b">Ù…Ø´Ø±ÙˆØ¹ Ù…Ø´Ø§Ø±Ùƒ ÙÙŠ Ù…Ø³Ø§Ø¨Ù‚Ø© Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ 2026.</p>
        <button class="close-modal" onclick="closeModal('aboutModal')">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
</div>

<!-- Guide Modal -->
<div id="guideModal" class="modal">
    <div class="modal-content">
        <h2>Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</h2>
        <ol>
            <li><strong>Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ÙˆØ§Ù„Ù†ØµÙˆØµ:</strong> Ø§Ù†Ø³Ø® Ø£ÙŠ Ø±Ø§Ø¨Ø· ØªØ´Ùƒ ÙÙŠÙ‡ ÙˆØ§Ù„ØµÙ‚Ù‡ ÙÙŠ Ø§Ù„Ø®Ø§Ù†Ø© Ø§Ù„Ù…Ø®ØµØµØ©.</li>
            <li><strong>Ø§Ù„ØµÙˆØ±:</strong> Ø§Ø±ÙØ¹ ØµÙˆØ±Ø© Ø£Ùˆ Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø© Ù„ØªØ­Ù„ÙŠÙ„ Ù…Ø­ØªÙˆØ§Ù‡Ø§ ÙˆÙ…ØµØ¯Ø±Ù‡Ø§.</li>
            <li><strong>QR Code:</strong> Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù„Ù…Ø³Ø­ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ ÙˆØ§Ù„ØªØ­Ù‚Ù‚ Ù…Ù†Ù‡Ø§ Ù‚Ø¨Ù„ Ø§Ù„ÙØªØ­.</li>
        </ol>
        <p><strong>Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù†:</strong></p>
        <ul>
            <li>ğŸŸ¢ <span style="color:#10b981">Ø£Ø®Ø¶Ø±:</span> Ø¢Ù…Ù† Ø¨Ù†Ø³Ø¨Ø© Ø¹Ø§Ù„ÙŠØ©.</li>
            <li>ğŸŸ  <span style="color:#f59e0b">Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ:</span> Ù…Ø´Ø¨ÙˆÙ‡ØŒ ÙŠØªØ·Ù„Ø¨ Ø§Ù„Ø­Ø°Ø±.</li>
            <li>ğŸ”´ <span style="color:#ef4444">Ø£Ø­Ù…Ø±:</span> Ø®Ø·Ø±! Ù„Ø§ ØªÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø·.</li>
        </ul>
        <button class="close-modal" onclick="closeModal('guideModal')">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
</div>

<!-- Settings Modal -->
<div id="settingsModal" class="modal">
    <div class="modal-content">
        <h2>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>
        <p>ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙØªØ§Ø­ API Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ:</p>
        <input type="text" id="apiKey" placeholder="Gemini API Key" style="width:100%; padding:10px; border-radius:5px; border:1px solid #475569; background:#0f172a; color:white;">
        <button class="action-btn" onclick="saveKey()">Ø­ÙØ¸</button>
        <button class="close-modal" onclick="closeModal('settingsModal')">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
</div>

<script src="app.js"></script>
</body>
</html>
