<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù„Ø¯Ø±Ø¹ Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ | CyberShield</title>
<link rel="manifest" href="manifest.json">
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
<script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>

<style>
:root {
    --primary: #3b82f6;
    --danger: #ef4444;
    --success: #10b981;
    --warn: #f59e0b;
    --bg: #0f172a;
    --card: #1e293b;
    --text: #f8fafc;
}

body {
    font-family: 'Tajawal', sans-serif;
    background: var(--bg);
    color: var(--text);
    margin: 0;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

header {
    background: rgba(30, 41, 59, 0.9);
    backdrop-filter: blur(10px);
    padding: 15px 20px;
    position: sticky;
    top: 0;
    z-index: 100;
    border-bottom: 1px solid #334155;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
}

.logo {
    font-weight: bold;
    font-size: 1.3rem;
    background: linear-gradient(90deg, #3b82f6, #06b6d4);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.settings-icon { font-size: 1.5rem; cursor: pointer; }

.container {
    max-width: 600px;
    margin: 30px auto;
    padding: 0 20px;
    flex: 1;
}

.tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 25px;
    background: #020617;
    padding: 6px;
    border-radius: 14px;
    border: 1px solid #334155;
}

.tab {
    flex: 1;
    padding: 12px;
    text-align: center;
    background: transparent;
    border: none;
    color: #94a3b8;
    cursor: pointer;
    border-radius: 10px;
    transition: 0.3s;
    font-family: inherit;
    font-weight: bold;
}

.tab.active {
    background: var(--card);
    color: white;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

.input-group { display: none; animation: fadeIn 0.4s ease; }
.input-group.active { display: block; }

textarea {
    width: 100%;
    padding: 15px;
    background: var(--card);
    border: 1px solid #334155;
    color: white;
    border-radius: 14px;
    height: 120px;
    font-family: inherit;
    font-size: 1rem;
    box-sizing: border-box;
    resize: none;
}
textarea:focus { outline: 2px solid var(--primary); border-color: transparent; }

.file-drop {
    border: 2px dashed #475569;
    padding: 40px;
    text-align: center;
    border-radius: 14px;
    cursor: pointer;
    background: var(--card);
    transition: 0.3s;
}
.file-drop:hover { border-color: var(--primary); background: #252f45; }

.main-btn {
    width: 100%;
    padding: 16px;
    background: linear-gradient(135deg, var(--primary), #2563eb);
    border: none;
    border-radius: 14px;
    color: white;
    font-size: 1.1rem;
    font-weight: bold;
    margin-top: 25px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
    transition: transform 0.2s;
}
.main-btn:active { transform: scale(0.98); }

.secondary-btn {
    background: #334155;
    color: white;
    border: none;
    padding: 12px;
    border-radius: 10px;
    cursor: pointer;
    width: 100%;
    font-family: inherit;
    margin-top: 10px;
}

/* Result Card Styling */
.result-card {
    background: var(--card);
    border-radius: 20px;
    padding: 25px;
    margin-top: 20px;
    display: none;
    border: 1px solid #334155;
    box-shadow: 0 20px 50px rgba(0,0,0,0.5);
    animation: slideUp 0.5s ease;
}

.score-circle {
    width: 110px;
    height: 110px;
    border-radius: 50%;
    background: conic-gradient(var(--success) 0%, #334155 0%);
    margin: 0 auto 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    box-shadow: 0 0 20px rgba(0,0,0,0.3);
}

.score-inner {
    width: 85px;
    height: 85px;
    background: var(--card);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8rem;
    font-weight: bold;
}

.detail-box {
    background: #0f172a;
    padding: 15px;
    border-radius: 12px;
    margin-top: 15px;
    border-right: 4px solid var(--primary);
}

/* Modal */
.modal {
    position: fixed; top:0; left:0; right:0; bottom:0;
    background: rgba(0,0,0,0.85);
    display: none;
    align-items: center; justify-content: center; z-index: 200;
}
.modal-content {
    background: var(--card); padding: 30px;
    border-radius: 16px; width: 90%; max-width: 400px;
    text-align: center;
}
input[type="text"] {
    width: 100%; padding: 12px; margin: 15px 0;
    border-radius: 10px; border: 1px solid #475569;
    background: #0f172a; color: white; box-sizing: border-box;
}

@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

footer {
    text-align: center;
    padding: 25px;
    color: #64748b;
    font-size: 0.9rem;
    border-top: 1px solid #1e293b;
    margin-top: 30px;
}
</style>
</head>
<body>

<header>
    <div class="logo">ğŸ›¡ï¸ CyberShield</div>
    <div class="settings-icon" onclick="openSettings()">âš™ï¸</div>
</header>

<div class="container">
    
    <!-- Ù‚Ø³Ù… Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª (ÙŠØ®ØªÙÙŠ Ø¹Ù†Ø¯ Ø¸Ù‡ÙˆØ± Ø§Ù„Ù†ØªØ§Ø¦Ø¬) -->
    <div id="inputSection">
        <div class="tabs">
            <button class="tab active" onclick="switchTab('text')">Ù†Øµ / Ø±Ø§Ø¨Ø·</button>
            <button class="tab" onclick="switchTab('image')">ØµÙˆØ±Ø©</button>
            <button class="tab" onclick="switchTab('qr')">QR Code</button>
        </div>

        <div id="tab-text" class="input-group active">
            <textarea id="textInput" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ø§Ø¨Ø· Ø£Ùˆ Ø§Ù„Ù†Øµ Ù‡Ù†Ø§ Ù„Ù„ÙØ­Øµ..."></textarea>
        </div>

        <div id="tab-image" class="input-group">
            <div class="file-drop" onclick="document.getElementById('fileInput').click()">
                <div style="font-size:2rem; margin-bottom:10px">ğŸ“¸</div>
                <p>Ø§Ø¶ØºØ· Ù„Ø±ÙØ¹ ØµÙˆØ±Ø©</p>
                <p style="font-size:0.8rem; color:#64748b">ÙŠØªÙ… ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ± Ù„Ù„ÙƒØ´Ù Ø¹Ù† Ø§Ù„ØªØ²ÙŠÙŠÙ</p>
                <input type="file" id="fileInput" hidden accept="image/*" onchange="previewImage(this)">
            </div>
            <img id="imagePreview" style="width:100%; margin-top:15px; border-radius:12px; display:none;">
        </div>

        <div id="tab-qr" class="input-group">
            <div id="qr-reader" style="border-radius:12px; overflow:hidden"></div>
            <p id="qr-result" style="text-align:center; color:var(--primary); margin:10px 0;"></p>
            <button class="secondary-btn" onclick="startQR()">ğŸ“· ÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</button>
        </div>

        <button id="analyzeBtn" class="main-btn" onclick="processAnalysis()">ğŸ›¡ï¸ Ø¨Ø¯Ø¡ Ø§Ù„ÙØ­Øµ Ø§Ù„Ø´Ø§Ù…Ù„</button>
    </div>

    <!-- Loading -->
    <div id="loader" style="display:none; text-align:center; margin-top:40px;">
        <p style="margin-bottom:15px; font-size:1.1rem">Ø¬Ø§Ø±Ù ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ...</p>
        <div style="width:60px; height:60px; border:4px solid var(--primary); border-top-color:transparent; border-radius:50%; margin:auto; animation:spin 1s linear infinite;"></div>
    </div>

    <!-- Ù‚Ø³Ù… Ø§Ù„Ù†ØªØ§Ø¦Ø¬ (ÙŠØ¸Ù‡Ø± Ø¨Ø¹Ø¯ Ø§Ù„ÙØ­Øµ) -->
    <div id="resultCard" class="result-card">
        <div class="score-circle" id="scoreCircle">
            <div class="score-inner" id="scoreValue">0%</div>
        </div>
        
        <div style="text-align:center; margin-bottom:20px;">
            <span id="badgeStatus" style="padding: 6px 15px; border-radius: 20px; font-size: 0.9rem;">...</span>
            <h2 id="resultTitle" style="margin: 10px 0;"></h2>
            <p id="resultSummary" style="color: #cbd5e1; line-height: 1.6;"></p>
        </div>

        <div class="detail-box">
            <h4 style="margin:0 0 10px 0; color:var(--primary)">ğŸ” Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠØ©:</h4>
            <p id="resultDetails" style="font-size:0.9rem; color:#94a3b8; margin:0; line-height:1.6"></p>
        </div>

        <div class="detail-box" style="border-right-color: var(--warn);">
            <h4 style="margin:0 0 10px 0; color:var(--warn)">ğŸ’¡ Ø§Ù„ØªÙˆØµÙŠØ© Ø§Ù„Ø£Ù…Ù†ÙŠØ©:</h4>
            <p id="resultRec" style="font-size:0.9rem; color:#f1f5f9; margin:0; line-height:1.6"></p>
        </div>

        <!-- Ø²Ø± ÙØ­Øµ Ø¬Ø¯ÙŠØ¯ -->
        <button class="main-btn" style="background: #334155; margin-top:30px" onclick="resetApp()">ğŸ”„ ÙØ­Øµ Ø¬Ø¯ÙŠØ¯</button>
    </div>

</div>

<footer>
    ØªØµÙ…ÙŠÙ… : Ø£Ø­Ù…Ø¯ Ø§Ù„ÙØ²Ø§Ø±ÙŠ 2026
</footer>

<!-- Settings Modal -->
<div class="modal" id="settingsModal">
    <div class="modal-content">
        <h3>ğŸ”‘ Ø¥Ø¹Ø¯Ø§Ø¯ Ù…ÙØªØ§Ø­ API</h3>
        <p style="font-size:0.9rem; color:#94a3b8">Ø£Ù„ØµÙ‚ Ù…ÙØªØ§Ø­ Gemini Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ù„ÙŠØ¹Ù…Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</p>
        <input type="text" id="apiKeyInput" placeholder="Paste API Key Here">
        <button class="main-btn" onclick="saveKey()">Ø­ÙØ¸ Ø§Ù„Ù…ÙØªØ§Ø­</button>
        <button class="secondary-btn" style="margin-top:10px; background:transparent" onclick="closeSettings()">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
</div>

<style>@keyframes spin { 100% { transform: rotate(360deg); } }</style>
<script src="app.js"></script>
</body>
</html>
