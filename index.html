<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù„Ø¯Ø±Ø¹ Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ | CyberShield</title>

<link rel="manifest" href="manifest.json">
<link rel="icon" href="icon-192.png">

<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">

<style>
:root {
  --primary:#3b82f6;
  --bg:#0f172a;
  --card:#1e293b;
  --border:#334155;
  --text:#f1f5f9;
}

body{
  font-family:'Tajawal', sans-serif;
  background:var(--bg);
  color:var(--text);
  margin:0;
}

header{
  padding:18px;
  border-bottom:1px solid var(--border);
  text-align:center;
  font-weight:800;
  color:var(--primary);
  font-size: 1.2rem;
}

.container{
  max-width:600px;
  margin:auto;
  padding:20px;
}

.tabs{
  display:flex;
  gap:8px;
  margin:20px 0;
  background:#020617;
  padding:5px;
  border-radius:12px;
}

.tab{
  flex:1;
  padding:10px;
  border:none;
  border-radius:8px;
  background:none;
  color:#64748b;
  font-weight:bold;
  cursor:pointer;
  transition: 0.3s;
}

.tab.active{
  background:var(--card);
  color:white;
}

.input-area{
  background:var(--card);
  padding:20px;
  border-radius:16px;
  border:1px solid var(--border);
}

textarea{
  width:100%;
  height:100px;
  border-radius:10px;
  background:#0f172a;
  border:1px solid var(--border);
  color:white;
  padding:10px;
  box-sizing: border-box;
  font-family: inherit;
}

input[type="file"] {
  color: var(--text);
}

.action-btn{
  width:100%;
  padding:15px;
  margin-top:15px;
  border:none;
  border-radius:10px;
  background:var(--primary);
  color:white;
  font-weight:bold;
  cursor:pointer;
  transition: 0.3s;
}
.action-btn:hover { background: #2563eb; }

.result-card{
  background:var(--card);
  border-radius:16px;
  padding:25px;
  margin-top:25px;
  border:1px solid var(--border);
  display:none;
}

.progress-wrap{
  display:none;
  margin-top:15px;
}

.progress-bar{
  height:10px;
  width:0%;
  background:var(--primary);
  transition:width .4s ease;
}

.note{
  font-size:.85rem;
  color:#94a3b8;
  margin-top:10px;
  padding: 10px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 8px;
}

.history{
  margin-top:20px;
  font-size:.9rem;
  color:#94a3b8;
  line-height: 1.6;
}
</style>
</head>

<body>

<header>ğŸ›¡ï¸ Ø§Ù„Ø¯Ø±Ø¹ Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ | CyberShield</header>

<div class="container">

  <div id="mainSection">
    <div class="tabs">
      <button class="tab active" onclick="setMode('text',this)">Ø±Ø§Ø¨Ø· / Ù†Øµ</button>
      <button class="tab" onclick="setMode('image',this)">ØµÙˆØ±Ø©</button>
    </div>

    <div class="input-area">
      <div id="text-view">
        <textarea id="textInput" placeholder="Ø§Ù„ØµÙ‚ Ø§Ù„Ø±Ø§Ø¨Ø· Ø£Ùˆ Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø´Ø¨ÙˆÙ‡ Ù‡Ù†Ø§..."></textarea>
      </div>

      <div id="image-view" style="display:none">
        <input type="file" accept="image/*" onchange="handleImage(this)">
        <img id="imgPreview" style="max-width:100%; display:none; margin-top:15px; border-radius:10px;">
      </div>

      <button id="analyzeBtn" class="action-btn" onclick="analyze()">Ø¨Ø¯Ø¡ Ø§Ù„ÙØ­Øµ Ø§Ù„Ø£Ù…Ù†ÙŠ</button>

      <div class="progress-wrap" id="progressWrap">
        <div style="background:#020617; border-radius:10px; overflow:hidden">
          <div id="progressBar" class="progress-bar"></div>
        </div>
        <div style="text-align:center; margin-top:8px; color:#94a3b8; font-size: 0.9rem;">
          Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ...
        </div>
      </div>
    </div>
  </div>

  <div id="resultSection" class="result-card">
    <div style="text-align:center; font-size:2.5rem; font-weight:bold; color:var(--primary)" id="riskScore"></div>
    <h3 id="resStatus" style="text-align:center;"></h3>
    
    <p id="resSummary" style="color: #cbd5e1;"></p>

    <div style="margin-top: 15px;">
      <strong>Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠØ©:</strong>
      <p id="resDetails" style="font-size: 0.95rem; color: #94a3b8;"></p>
    </div>

    <div style="margin-top: 15px;">
      <strong>Ø§Ù„ØªÙˆØµÙŠØ© Ø§Ù„Ø£Ù…Ù†ÙŠØ©:</strong>
      <p id="decisionReason" style="font-size: 0.95rem; color: #f87171;"></p>
    </div>

    <div class="note">
      âš ï¸ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ ØªØ­Ù„ÙŠÙ„ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ø­ØªÙ…Ø§Ù„ÙŠØŒ ÙˆÙ„Ø§ ÙŠØ¹ØªØ¨Ø± ØªØ£ÙƒÙŠØ¯Ø§Ù‹ Ù‚Ø·Ø¹ÙŠØ§Ù‹ Ù„Ù„Ø³Ù„Ø§Ù…Ø© Ø¨Ù†Ø³Ø¨Ø© 100%.
    </div>

    <div style="margin-top:15px; border-top: 1px solid var(--border); padding-top: 15px;">
      <strong>Ù…Ø³ØªÙˆÙ‰ Ø«Ù‚Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ:</strong> <span id="confidence" style="color: var(--primary); font-weight: bold;"></span>
    </div>

    <button class="action-btn" style="margin-top: 20px;" onclick="downloadReport()">ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
    <button class="action-btn" style="background:#22c55e" onclick="shareWhatsApp()">Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù†ØªÙŠØ¬Ø© ğŸ“±</button>
    <button class="action-btn" style="background:#475569" onclick="resetApp()">ÙØ­Øµ Ø¬Ø¯ÙŠØ¯ ğŸ”„</button>

    <div class="history" id="historyBox"></div>
  </div>

</div>

<!-- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù€ Service Worker Ù„ÙŠØ¹Ù…Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙƒÙ€ PWA -->
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./service-worker.js');
    });
  }
</script>
<script src="app.js"></script>
</body>
</html>
