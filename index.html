<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù„Ø¯Ø±Ø¹ Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ | CyberShield</title>

<link rel="manifest" href="manifest.json">
<link rel="icon" href="icon-192.png">

<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">

<style>
:root {
  --primary:#3b82f6;
  --bg:#0f172a;
  --card:#1e293b;
  --border:#334155;
  --text:#f1f5f9;
}

body{
  font-family:'Tajawal', sans-serif;
  background:var(--bg);
  color:var(--text);
  margin:0;
}

header{
  padding:18px;
  border-bottom:1px solid var(--border);
  text-align:center;
  font-weight:800;
  color:var(--primary);
  font-size: 1.5rem;
}

.container{
  max-width:600px;
  margin:auto;
  padding:20px;
}

/* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */
.info-buttons {
  display: flex;
  gap: 10px;
  justify-content: center;
  margin-bottom: 20px;
}
.info-btn {
  background: transparent;
  border: 1px solid var(--primary);
  color: var(--primary);
  padding: 8px 16px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
  font-family: inherit;
  transition: 0.3s;
  font-size: 0.9rem;
}
.info-btn:hover {
  background: var(--primary);
  color: white;
}

.tabs{
  display:flex;
  gap:8px;
  margin:10px 0 20px 0;
  background:#020617;
  padding:5px;
  border-radius:12px;
}

.tab{
  flex:1;
  padding:10px;
  border:none;
  border-radius:8px;
  background:none;
  color:#64748b;
  font-weight:bold;
  cursor:pointer;
  transition: 0.3s;
}

.tab.active{
  background:var(--card);
  color:white;
}

.input-area{
  background:var(--card);
  padding:20px;
  border-radius:16px;
  border:1px solid var(--border);
}

textarea{
  width:100%;
  height:100px;
  border-radius:10px;
  background:#0f172a;
  border:1px solid var(--border);
  color:white;
  padding:10px;
  box-sizing: border-box;
  font-family: inherit;
}

input[type="file"] {
  color: var(--text);
}

.action-btn{
  width:100%;
  padding:15px;
  margin-top:15px;
  border:none;
  border-radius:10px;
  background:var(--primary);
  color:white;
  font-weight:bold;
  cursor:pointer;
  transition: 0.3s;
  font-family: inherit;
  font-size: 1rem;
}
.action-btn:hover { background: #2563eb; }

.result-card{
  background:var(--card);
  border-radius:16px;
  padding:25px;
  margin-top:25px;
  border:1px solid var(--border);
  display:none;
}

.progress-wrap{
  display:none;
  margin-top:15px;
}

.progress-bar{
  height:10px;
  width:0%;
  background:var(--primary);
  transition:width .4s ease;
}

.note{
  font-size:.85rem;
  color:#94a3b8;
  margin-top:10px;
  padding: 10px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 8px;
}

.history{
  margin-top:20px;
  font-size:.9rem;
  color:#94a3b8;
  line-height: 1.6;
}

/* ØªØµÙ…ÙŠÙ… Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© (Modals) */
.modal-overlay {
  display: none;
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0,0,0,0.8);
  z-index: 1000;
  justify-content: center;
  align-items: center;
  backdrop-filter: blur(4px);
}
.modal-content {
  background: var(--card);
  padding: 25px;
  border-radius: 16px;
  max-width: 500px;
  width: 85%;
  border: 1px solid var(--border);
  position: relative;
  line-height: 1.7;
}
.close-btn {
  position: absolute;
  top: 15px;
  left: 15px;
  background: none;
  border: none;
  color: #f87171;
  font-size: 1.5rem;
  cursor: pointer;
}
.modal-title {
  color: var(--primary);
  margin-top: 0;
  border-bottom: 1px solid var(--border);
  padding-bottom: 10px;
}
</style>
</head>

<body>

<header>ğŸ›¡ï¸ Ø§Ù„Ø¯Ø±Ø¹ Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ | CyberShield</header>

<div class="container">

  <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª -->
  <div class="info-buttons">
    <button class="info-btn" onclick="openModal('aboutModal')">Ø¹Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ â„¹ï¸</button>
    <button class="info-btn" onclick="openModal('guideModal')">Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ğŸ“–</button>
  </div>

  <div id="mainSection">
    <div class="tabs">
      <button class="tab active" onclick="setMode('text',this)">Ø±Ø§Ø¨Ø· / Ù†Øµ</button>
      <button class="tab" onclick="setMode('image',this)">ØµÙˆØ±Ø©</button>
    </div>

    <div class="input-area">
      <div id="text-view">
        <textarea id="textInput" placeholder="Ø§Ù„ØµÙ‚ Ø§Ù„Ø±Ø§Ø¨Ø· Ø£Ùˆ Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø´Ø¨ÙˆÙ‡ Ù‡Ù†Ø§..."></textarea>
      </div>

      <div id="image-view" style="display:none">
        <input type="file" accept="image/*" onchange="handleImage(this)">
        <img id="imgPreview" style="max-width:100%; display:none; margin-top:15px; border-radius:10px;">
      </div>

      <button id="analyzeBtn" class="action-btn" onclick="analyze()">Ø¨Ø¯Ø¡ Ø§Ù„ÙØ­Øµ Ø§Ù„Ø£Ù…Ù†ÙŠ</button>

      <div class="progress-wrap" id="progressWrap">
        <div style="background:#020617; border-radius:10px; overflow:hidden">
          <div id="progressBar" class="progress-bar"></div>
        </div>
        <div style="text-align:center; margin-top:8px; color:#94a3b8; font-size: 0.9rem;">
          Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ Ø¹Ø¨Ø± Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ...
        </div>
      </div>
    </div>
  </div>

  <div id="resultSection" class="result-card">
    <div style="text-align:center; font-size:2.5rem; font-weight:bold; color:var(--primary)" id="riskScore"></div>
    <h3 id="resStatus" style="text-align:center;"></h3>
    
    <p id="resSummary" style="color: #cbd5e1;"></p>

    <div style="margin-top: 15px;">
      <strong>Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠØ©:</strong>
      <p id="resDetails" style="font-size: 0.95rem; color: #94a3b8;"></p>
    </div>

    <div style="margin-top: 15px;">
      <strong>Ø§Ù„ØªÙˆØµÙŠØ© Ø§Ù„Ø£Ù…Ù†ÙŠØ©:</strong>
      <p id="decisionReason" style="font-size: 0.95rem; color: #f87171;"></p>
    </div>

    <div class="note">
      âš ï¸ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ ØªØ­Ù„ÙŠÙ„ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ø­ØªÙ…Ø§Ù„ÙŠØŒ ÙˆÙ„Ø§ ÙŠØ¹ØªØ¨Ø± ØªØ£ÙƒÙŠØ¯Ø§Ù‹ Ù‚Ø·Ø¹ÙŠØ§Ù‹ Ù„Ù„Ø³Ù„Ø§Ù…Ø© Ø¨Ù†Ø³Ø¨Ø© 100%.
    </div>

    <div style="margin-top:15px; border-top: 1px solid var(--border); padding-top: 15px;">
      <strong>Ù…Ø³ØªÙˆÙ‰ Ø«Ù‚Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ:</strong> <span id="confidence" style="color: var(--primary); font-weight: bold;"></span>
    </div>

    <button class="action-btn" style="margin-top: 20px;" onclick="downloadReport()">ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
    <button class="action-btn" style="background:#22c55e" onclick="shareWhatsApp()">Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù†ØªÙŠØ¬Ø© ğŸ“±</button>
    <button class="action-btn" style="background:#475569" onclick="resetApp()">ÙØ­Øµ Ø¬Ø¯ÙŠØ¯ ğŸ”„</button>

    <div class="history" id="historyBox"></div>
  </div>

</div>

<!-- Ù†Ø§ÙØ°Ø© "Ø¹Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚" -->
<div id="aboutModal" class="modal-overlay">
  <div class="modal-content">
    <button class="close-btn" onclick="closeModal('aboutModal')">Ã—</button>
    <h2 class="modal-title">Ø¹Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ â„¹ï¸</h2>
    <p><strong>Ø§Ù„Ø¯Ø±Ø¹ Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ (CyberShield)</strong> Ù‡Ùˆ Ù…Ù†ØµØ© ØªØ­Ù„ÙŠÙ„ Ø£Ù…Ù†ÙŠ Ø§Ø³ØªØ¨Ø§Ù‚ÙŠØ© ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„ØªÙˆÙ„ÙŠØ¯ÙŠ (Gemini AI).</p>
    <p>ØªÙ… ØªØ·ÙˆÙŠØ± Ù‡Ø°Ø§ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙƒØ­Ù„ ØªÙ‚Ù†ÙŠ Ù…Ø¨ØªÙƒØ± Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ <strong>Ù…Ù„ØªÙ‚Ù‰ Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ</strong>ØŒ ÙˆÙŠÙ‡Ø¯Ù Ø¥Ù„Ù‰ Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ù† Ù‡Ø¬Ù…Ø§Øª Ø§Ù„ØªØµÙŠØ¯ Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„ÙŠ (Phishing)ØŒ ÙˆØ§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø®Ø¨ÙŠØ«Ø©ØŒ ÙˆØ§Ù„ÙˆØ³Ø§Ø¦Ø· Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ù…Ø²ÙŠÙØ©.</p>
    <p style="color: var(--primary); font-weight: bold;">Ø±Ø¤ÙŠØªÙ†Ø§: ØªØ¹Ø²ÙŠØ² Ø§Ù„ÙˆØ¹ÙŠ Ø§Ù„Ø£Ù…Ù†ÙŠ Ø§Ù„Ø±Ù‚Ù…ÙŠ ÙˆØªÙˆÙÙŠØ± Ø£Ø¯Ø§Ø© Ø­Ù…Ø§ÙŠØ© ÙÙŠ Ù…ØªÙ†Ø§ÙˆÙ„ Ø§Ù„Ø¬Ù…ÙŠØ¹.</p>
  </div>
</div>

<!-- Ù†Ø§ÙØ°Ø© "Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" -->
<div id="guideModal" class="modal-overlay">
  <div class="modal-content">
    <button class="close-btn" onclick="closeModal('guideModal')">Ã—</button>
    <h2 class="modal-title">Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ğŸ“–</h2>
    <p>Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø³ÙŠØ· Ø¬Ø¯Ø§Ù‹ ÙˆÙŠØªÙƒÙˆÙ† Ù…Ù† Ø®Ø·ÙˆØ§Øª Ù…Ø¹Ø¯ÙˆØ¯Ø©:</p>
    <ol style="padding-right: 20px;">
      <li><strong>Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ÙØ­Øµ:</strong> Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠØ©ØŒ Ø§Ø®ØªØ± Ù…Ø§ Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ±ÙŠØ¯ ÙØ­Øµ (Ø±Ø§Ø¨Ø·/Ù†Øµ) Ø£Ùˆ (ØµÙˆØ±Ø©).</li>
      <li><strong>Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</strong> Ù‚Ù… Ø¨Ù„ØµÙ‚ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø´Ø¨ÙˆÙ‡ Ø£Ùˆ Ø§Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø±Ø§Ø¯ ØªØ­Ù„ÙŠÙ„Ù‡Ø§.</li>
      <li><strong>Ø¨Ø¯Ø¡ Ø§Ù„ÙØ­Øµ:</strong> Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± "Ø¨Ø¯Ø¡ Ø§Ù„ÙØ­Øµ Ø§Ù„Ø£Ù…Ù†ÙŠ" ÙˆØ§Ù†ØªØ¸Ø± Ø­ØªÙ‰ ÙŠÙ‚ÙˆÙ… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¨ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.</li>
      <li><strong>Ø§Ù„Ù†ØªØ§Ø¦Ø¬:</strong> Ø³ØªØ¸Ù‡Ø± Ù„Ùƒ Ù†Ø³Ø¨Ø© Ø§Ù„Ø®Ø·ÙˆØ±Ø©ØŒ Ù…Ù„Ø®Øµ Ø£Ù…Ù†ÙŠØŒ ÙˆØªÙˆØµÙŠØ© ØªÙ‚Ù†ÙŠØ©.</li>
      <li><strong>Ø§Ù„ØªÙ‚Ø±ÙŠØ±:</strong> ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ù…ÙŠÙ„ ØªÙ‚Ø±ÙŠØ± Ø£Ù…Ù†ÙŠ Ø¨ØµÙŠØºØ© Ù†ØµÙŠØ© Ø£Ùˆ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†.</li>
    </ol>
  </div>
</div>

<!-- Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© ÙˆØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù€ Service Worker -->
<script>
  // ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
  function openModal(id) {
    document.getElementById(id).style.display = 'flex';
  }
  
  // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
  function closeModal(id) {
    document.getElementById(id).style.display = 'none';
  }

  // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø®Ø§Ø±Ø¬Ù‡Ø§
  window.onclick = function(event) {
    if (event.target.classList.contains('modal-overlay')) {
      event.target.style.display = "none";
    }
  }

  // ØªØ³Ø¬ÙŠÙ„ PWA
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./service-worker.js');
    });
  }
</script>
<script src="app.js"></script>
</body>
</html>
